<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Builder | Propix Lk</title>
    <meta name="description" content="Create your professional CV with our step-by-step builder.">
    <meta name="keywords" content="cv builder, resume builder, professional cv, propix lk">
    
    <link rel="manifest" href="/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/Favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/Favicon/favicon-16x16.png">
    <link rel="shortcut icon" href="assets/img/Favicon/favicon.ico">
    <meta name="theme-color" content="#ffffff">
    
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
    // පිටුව load වීමට පෙර කලින් save කර ඇති theme එක පරීක්ෂා කිරීම
    if (localStorage.getItem('theme') === 'dark' || 
        (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
</script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            100: '#03abec',
                            200: '#1590ef',
                            300: '#1c86f1',
                            400: '#2e69f4',
                            500: '#3d53f7',
                            600: '#424cf6',
                            900: '#1a237e', 
                        },
                        dark: {
                            bg: '#0b1121', 
                            card: '#1e293b',
                            text: '#f8fafc',
                            muted: '#cbd5e1'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Styles */
        body {
            overflow-x: hidden;
        }

        /* Wizard Styles */
        .form-step {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .form-step.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-indicator-item.active .step-bubble {
            background-color: #424cf6;
            color: white;
            border-color: #424cf6;
        }
        .step-indicator-item.completed .step-bubble {
            background-color: #10b981; /* Green */
            color: white;
            border-color: #10b981;
        }
        .step-indicator-item.completed::after {
            background-color: #10b981;
        }
        
        /* Custom Scrollbar for review section if needed */
        .review-paper {
            background: white;
            color: #333;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .dark .review-paper {
            background: #e5e5e5; /* Keep paper light even in dark mode for readability preview */
            color: #1a1a1a;
        }

        /* Design Selection */
        .design-template {
            cursor: pointer;
            border: 4px solid transparent;
            transition: all 0.3s ease;
        }
        .design-template.selected {
            border-color: #424cf6;
            transform: scale(1.02);
            box-shadow: 0 10px 25px -5px rgba(66, 76, 246, 0.3);
        }

        /* Popup Styles */
        .popup-overlay {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s, visibility 0.4s;
        }
        .popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 3;
            stroke-miterlimit: 10;
            stroke: #10b981;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 4;
            stroke: #fff;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #10b981;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }
        .checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        @keyframes stroke { 100% { stroke-dashoffset: 0; } }
        @keyframes scale { 0%, 100% { transform: none; } 50% { transform: scale3d(1.1, 1.1, 1); } }
        @keyframes fill { 100% { box-shadow: inset 0px 0px 0px 40px #10b981; } }

        /* Custom Cursor from Index */
        .custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border: 2px solid #424cf6;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            z-index: 9999;
            transition: transform 0.1s ease, width 0.2s, height 0.2s, background-color 0.2s;
            mix-blend-mode: difference;
        }
        .custom-cursor.hovered {
            width: 40px;
            height: 40px;
            background-color: rgba(66, 76, 246, 0.3);
            border-color: transparent;
        }
        @media (pointer: coarse) {
            .custom-cursor { display: none; }
        }
    </style>
</head>
<body class="antialiased relative bg-white text-gray-900 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300">

    <!-- Cursor -->
    <div class="custom-cursor hidden md:block" id="customCursor"></div>

    <!-- Navbar -->
    <nav class="fixed w-full z-50 glass transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center cursor-pointer hoverable" onclick="window.location.href='index.html'">
                    <img src="assets/img/Sitelogo.png" alt="BluePixel Logo" class="h-8 md:h-9 lg:h-10 w-auto object-contain block dark:hidden transition-all"> 
                    <img src="assets/img/Sitelogow.png" alt="BluePixel Logo" class="h-8 md:h-9 lg:h-10 w-auto object-contain hidden dark:block transition-all"> 
                </div>
                
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Home</a>
                    <a href="#about" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">About</a>
                    <a href="#portfolio" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Work</a>
                    <a href="#services" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Services</a>
                    <!--<a href="#contact" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Contact</a> -->
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-brand-400 hoverable">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    <a href="index.html#contact" class="px-6 py-2.5 bg-brand-600 text-white rounded-full font-medium hover:bg-brand-500 transition shadow-lg shadow-brand-500/30 hoverable">
                        Let's Talk
                    </a>
                </div>

                <div class="md:hidden flex items-center gap-2">
                     <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-brand-400">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    <button id="mobile-menu-btn" class="p-2 text-gray-700 dark:text-white hover:text-brand-600 focus:outline-none">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-dark-card absolute w-full border-b border-gray-100 dark:border-gray-700 shadow-xl z-40">
            <div class="px-4 pt-4 pb-8 space-y-3 flex flex-col items-center text-center">
                <a href="index.html" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">Home</a>
                <a href="index.html#about" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">About</a>
                <a href="#portfolio" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">Work</a>
                <a href="#services" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">Services</a>
                <a href="#contact" class="block w-full px-3 py-4 text-lg font-bold text-white bg-brand-600 rounded-xl shadow-lg shadow-brand-500/30">Contact Us</a>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="pt-32 pb-12 bg-gray-50 dark:bg-black/20 relative overflow-hidden">
        <div class="absolute top-0 right-0 w-1/3 h-full bg-brand-100/10 blur-3xl rounded-full pointer-events-none"></div>
        <div class="max-w-7xl mx-auto px-4 text-center relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="text-left">
                    <h1 class="text-4xl md:text-5xl font-display font-bold text-gray-900 dark:text-white mb-2" data-en="CV Builder" data-si="CV නිර්මාපකය">
                        CV Builder
                    </h1>
                    <p class="text-gray-600 dark:text-gray-400 text-lg max-w-2xl" data-en="Fill in your details step-by-step to create a professional CV." data-si="ඔබේ CV එක නිර්මාණය කිරීමට, ඔබට අවශ්‍ය විස්තර පමණක් පහතින් සපයන්න.">
                        Fill in your details step-by-step to create a professional CV.
                    </p>
                </div>
                <button id="lang-toggle" class="px-6 py-2 rounded-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition font-medium">
                    සිංහල
                </button>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="py-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Step Indicator -->
        <div class="mb-12 overflow-x-auto pb-4 no-scrollbar">
            <ul class="step-indicator flex justify-between min-w-[600px] md:min-w-0 relative">
                <!-- Line background -->
                <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-200 dark:bg-gray-700 -translate-y-1/2 -z-10 rounded-full"></div>
                
                <li class="step-indicator-item active flex flex-col items-center gap-2 cursor-pointer z-10" data-step="1">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-brand-600 text-brand-600 flex items-center justify-center font-bold transition-all shadow-sm">1</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Personal" data-si="පුද්ගලික">Personal</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="2">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm">2</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Education" data-si="අධ්‍යාපනය">Education</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="3">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm">3</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Experience" data-si="පළපුරුද්ද">Experience</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="4">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm">4</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Skills" data-si="කුසලතා">Skills</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="5">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm">5</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Extra" data-si="අමතර">Extra</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="6">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm">6</div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Design" data-si="නිර්මාණය">Design</span>
                </li>
                <li class="step-indicator-item flex flex-col items-center gap-2 cursor-pointer z-10" data-step="7">
                    <div class="step-bubble w-10 h-10 rounded-full bg-white dark:bg-dark-card border-2 border-gray-300 dark:border-gray-600 text-gray-500 flex items-center justify-center font-bold transition-all shadow-sm"><i data-lucide="check" class="w-5 h-5"></i></div>
                    <span class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide bg-white dark:bg-dark-bg px-2" data-en="Review" data-si="සමාලෝචනය">Review</span>
                </li>
            </ul>
        </div>

        <!-- Form Container -->
        <div class="bg-white dark:bg-dark-card rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700 p-6 md:p-10">
            <form id="cv-form" class="space-y-6">
                
                <!-- Step 1: Personal -->
                <div class="form-step active" data-step="1">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 1: Personal Details" data-si="පියවර 1: පුද්ගලික තොරතුරු">Step 1: Personal Details</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Full Name" data-si="සම්පූර්ණ නම">Full Name</label>
                            <input type="text" id="fullName" name="fullName" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="National Identity Card (NIC) Number" data-si="ජාතික හැඳුනුම්පත් අංකය">National Identity Card (NIC)</label>
                            <input type="text" id="nic" name="nic" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                        <div class="md:col-span-2">
                             <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="About You (Short Introduction)" data-si="ඔබ ගැන (කෙටි හැඳින්වීමක්)">About You (Short Introduction)</label>
                             <textarea id="aboutYou" name="aboutYou" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable"></textarea>
                        </div>
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Email Address" data-si="විද්‍යුත් තැපෑල">Email Address</label>
                            <input type="email" id="email" name="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Phone Number" data-si="දුරකථන අංකය">Phone Number</label>
                            <input type="tel" id="phone" name="phone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                         <div class="md:col-span-2">
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="LinkedIn / Portfolio Link" data-si="LinkedIn / Portfolio සබැඳිය">LinkedIn / Portfolio Link</label>
                            <input type="url" id="portfolioLink" name="portfolioLink" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Address & Postal Code" data-si="ලිපිනය සහ තැපැල් කේතය">Address & Postal Code</label>
                            <textarea id="address" name="address" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable"></textarea>
                        </div>
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Date of Birth" data-si="උපන්දිනය">Date of Birth</label>
                            <input type="date" id="dob" name="dob" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                        <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Gender" data-si="ස්ත්‍රී/පුරුෂ භාවය">Gender</label>
                            <select id="gender" name="gender" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                              <option selected disabled value="" data-en="Choose..." data-si="තෝරන්න...">Choose...</option>
                              <option data-en="Male" data-si="පිරිමි">Male</option>
                              <option data-en="Female" data-si="ගැහැණු">Female</option>
                              <option data-en="Prefer not to say" data-si="පැවසීමට අකමැතියි">Prefer not to say</option>
                            </select>
                        </div>
                         <div>
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Marital Status" data-si="විවාහක අවිවාහක බව">Marital Status</label>
                            <select id="maritalStatus" name="maritalStatus" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                              <option selected disabled value="" data-en="Choose..." data-si="තෝරන්න...">Choose...</option>
                              <option data-en="Single" data-si="අවිවාහක">Single</option>
                              <option data-en="Married" data-si="විවාහක">Married</option>
                              <option data-en="Divorced" data-si="දික්කසාද වූ">Divorced</option>
                              <option data-en="Widowed" data-si="වැන්දඹු">Widowed</option>
                            </select>
                        </div>
                         <div class="md:col-span-2">
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Nationality" data-si="ජාතිය">Nationality</label>
                            <input type="text" id="nationality" name="nationality" value="Sri Lankan" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable">
                        </div>
                    </div>
                </div>

                <!-- Step 2: Education -->
                <div class="form-step" data-step="2">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 2: Educational Qualifications" data-si="පියවර 2: අධ්‍යාපන සුදුසුකම්">Step 2: Educational Qualifications</h4>
                    <div id="education-container" class="space-y-6"></div>
                    <button type="button" class="mt-4 flex items-center gap-2 px-6 py-3 border-2 border-dashed border-brand-300 rounded-xl text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition hoverable w-full justify-center" id="add-education">
                      <i data-lucide="plus-circle" class="w-5 h-5"></i> <span data-en="Add Education" data-si="අධ්‍යාපනයක් එක් කරන්න">Add Education</span>
                    </button>
                </div>

                <!-- Step 3: Experience -->
                <div class="form-step" data-step="3">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 3: Work Experience" data-si="පියවර 3: සේවා පළපුරුද්ද">Step 3: Work Experience</h4>
                    <div id="experience-container" class="space-y-6"></div>
                    <button type="button" class="mt-4 flex items-center gap-2 px-6 py-3 border-2 border-dashed border-brand-300 rounded-xl text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition hoverable w-full justify-center" id="add-experience">
                      <i data-lucide="plus-circle" class="w-5 h-5"></i> <span data-en="Add Experience" data-si="පළපුරුද්දක් එක් කරන්න">Add Experience</span>
                    </button>
                </div>

                <!-- Step 4: Skills -->
                <div class="form-step" data-step="4">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 4: Skills" data-si="පියවර 4: කුසලතා">Step 4: Skills</h4>
                    
                    <h5 class="text-lg font-bold mb-4 text-gray-800 dark:text-gray-200" data-en="Language Skills" data-si="භාෂා කුසලතා">Language Skills</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700">
                            <strong class="block mb-3 text-brand-600 dark:text-brand-400">සිංහල:</strong>
                            <div class="space-y-2">
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Sinhala - Reading" name="languageSkills[]" id="sinhalaRead" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Reading" data-si="කියවීම">Reading</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Sinhala - Writing" name="languageSkills[]" id="sinhalaWrite" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Writing" data-si="ලිවීම">Writing</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Sinhala - Speaking" name="languageSkills[]" id="sinhalaSpeak" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Speaking" data-si="කථනය">Speaking</span>
                                </label>
                            </div>
                        </div>
                        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700">
                            <strong class="block mb-3 text-brand-600 dark:text-brand-400">English:</strong>
                            <div class="space-y-2">
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="English - Reading" name="languageSkills[]" id="englishRead" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Reading" data-si="කියවීම">Reading</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="English - Writing" name="languageSkills[]" id="englishWrite" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Writing" data-si="ලිවීම">Writing</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="English - Speaking" name="languageSkills[]" id="englishSpeak" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Speaking" data-si="කථනය">Speaking</span>
                                </label>
                            </div>
                        </div>
                        <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700">
                            <strong class="block mb-3 text-brand-600 dark:text-brand-400">Tamil:</strong>
                            <div class="space-y-2">
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Tamil - Reading" name="languageSkills[]" id="tamilRead" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Reading" data-si="කියවීම">Reading</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Tamil - Writing" name="languageSkills[]" id="tamilWrite" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Writing" data-si="ලිවීම">Writing</span>
                                </label>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" value="Tamil - Speaking" name="languageSkills[]" id="tamilSpeak" class="rounded text-brand-600 focus:ring-brand-500">
                                    <span class="text-sm text-gray-700 dark:text-gray-300" data-en="Speaking" data-si="කථනය">Speaking</span>
                                </label>
                            </div>
                        </div>
                    </div>

                     <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Other Languages" data-si="වෙනත් භාෂා">Other Languages</label>
                        <input type="text" id="otherLanguages" name="otherLanguages" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" data-en-placeholder="e.g., French, Japanese" data-si-placeholder="උදා: ප්‍රංශ, ජපන්">
                    </div>

                    <h5 class="text-lg font-bold mb-4 text-gray-800 dark:text-gray-200" data-en="Other Skills" data-si="වෙනත් කුසලතා">Other Skills</h5>
                     <div class="mb-3">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="List your other professional or technical skills" data-si="ඔබේ අනෙකුත් වෘත්තීය හෝ තාක්ෂණික කුසලතා ලැයිස්තුගත කරන්න">List your other professional or technical skills</label>
                        <textarea id="otherSkills" name="otherSkills" rows="4" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" data-en-placeholder="e.g., Microsoft Office, Adobe Photoshop, Public Speaking..." data-si-placeholder="උදා: Microsoft Office, Adobe Photoshop, Public Speaking..."></textarea>
                    </div>
                </div>

                <!-- Step 5: Extra -->
                <div class="form-step" data-step="5">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 5: Awards, Achievements & More" data-si="පියවර 5: සම්මාන, ජයග්‍රහණ සහ තවත් දේ">Step 5: Awards, Achievements & More</h4>
                     <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Awards and Achievements" data-si="සම්මාන සහ ජයග්‍රහණ">Awards and Achievements</label>
                        <textarea id="awards" name="awards" rows="4" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" data-en-placeholder="List any special awards or achievements from school, university, or work." data-si-placeholder="පාසලෙන්, විශ්ව විද්‍යාලයෙන් හෝ රැකියාවෙන් ලැබුණු විශේෂ සම්මාන හෝ ජයග්‍රහණ ලැයිස්තුගත කරන්න."></textarea>
                    </div>
                    <div class="mb-6">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Additional Information" data-si="අමතර තොරතුරු">Additional Information</label>
                        <textarea id="additionalInfo" name="additionalInfo" rows="4" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" data-en-placeholder="Any other information you want to include in the CV." data-si-placeholder="CV පත්‍රිකාවට ඇතුළත් කිරීමට අවශ්‍ය වෙනත් ඕනෑම තොරතුරක්."></textarea>
                    </div>
                     <div class="mb-8">
                        <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" data-en="Job Type or Field You Are Looking For" data-si="ඔබ සොයන රැකියා වර්ගය හෝ ක්ෂේත්‍රය">Job Type or Field You Are Looking For</label>
                        <input type="text" id="jobType" name="jobType" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" data-en-placeholder="e.g., Software Engineering, Marketing Manager" data-si-placeholder="උදා: මෘදුකාංග ඉංජිනේරු, අලෙවි කළමනාකරු">
                    </div>
                    
                    <h5 class="text-lg font-bold mb-4 text-gray-800 dark:text-gray-200" data-en="References" data-si="නිර්දේශ">References</h5>
                    <p class="text-sm text-gray-500 mb-4" data-en='Provide only if necessary. Will be stated as "Available upon request" if left blank.' data-si='අවශ්‍ය නම් පමණක් ලබා දෙන්න. හිස්ව තැබුවහොත් "ඉල්ලීම මත ලබා ගත හැක" ලෙස සඳහන් වේ.'>Provide only if necessary. Will be stated as "Available upon request" if left blank.</p>
                     <div id="references-container" class="space-y-6"></div>
                    <button type="button" class="mt-4 flex items-center gap-2 px-6 py-3 border-2 border-dashed border-brand-300 rounded-xl text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition hoverable w-full justify-center" id="add-reference">
                      <i data-lucide="plus-circle" class="w-5 h-5"></i> <span data-en="Add Reference" data-si="නිර්දේශයක් එක් කරන්න">Add Reference</span>
                    </button>
                </div>

                <!-- Step 6: Design -->
                <div class="form-step" data-step="6">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white" data-en="Step 6: Choose Your CV Design" data-si="පියවර 6: ඔබේ CV නිර්මාණය තෝරන්න">Step 6: Choose Your CV Design</h4>
                    <input type="hidden" id="selectedDesign" name="selectedDesign" value="Template 1">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/1.jpg" alt="Template 1" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template selected w-full h-auto object-cover" data-design-name="Template 1">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 1</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/2.jpg" alt="Template 2" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 2">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 2</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/3.jpg" alt="Template 3" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 3">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 3</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/4.jpg" alt="Template 4" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 4">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 4</p>
                        </div>
                         <div class="group cursor-pointer">
                            <img src="assets/img/cv/5.jpg" alt="Template 5" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 5">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 5</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/6.jpg" alt="Template 6" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 6">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 6</p>
                        </div>
                         <div class="group cursor-pointer">
                            <img src="assets/img/cv/7.jpg" alt="Template 7" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 7">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 7</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/8.jpg" alt="Template 8" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 8">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 8</p>
                        </div>
                         <div class="group cursor-pointer">
                            <img src="assets/img/cv/9.jpg" alt="Template 5" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 5">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 9</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/10.jpg" alt="Template 6" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 6">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 10</p>
                        </div>
                         <div class="group cursor-pointer">
                            <img src="assets/img/cv/11.jpg" alt="Template 7" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 7">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 11</p>
                        </div>
                        <div class="group cursor-pointer">
                            <img src="assets/img/cv/12.jpg" alt="Template 8" class="rounded-xl shadow-md group-hover:shadow-xl transition design-template w-full h-auto object-cover" data-design-name="Template 8">
                            <p class="mt-2 text-sm font-medium text-gray-600 dark:text-gray-400">Template 12</p>
                        </div>
                        <!-- Add more templates or My Own Design logic here -->
                        <div class="col-span-2 md:col-span-4">
                            <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 hover:bg-brand-50 dark:hover:bg-brand-900/10 transition design-template flex flex-col items-center justify-center cursor-pointer" data-design-name="My Own Design">
                                <i data-lucide="upload-cloud" class="w-10 h-10 text-brand-500 mb-3"></i>
                                <h5 class="font-bold text-gray-900 dark:text-white" data-en="Use My Own Design" data-si="මගේම නිර්මාණයක් භාවිතා කරන්න">Use My Own Design</h5>
                                <p class="text-sm text-gray-500" data-en="Select this if you will provide your own template." data-si="ඔබ ඔබේම සැකිල්ලක් ලබා දෙන්නේ නම් මෙය තෝරන්න.">Select this if you will provide your own template.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 7: Review -->
                <div class="form-step" data-step="7">
                    <h4 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white text-center" data-en="Step 7: Review Your Information" data-si="පියවර 7: ඔබගේ තොරතුරු සමාලෝචනය කරන්න">Step 7: Review Your Information</h4>
                    
                    <div id="review-section" class="review-paper rounded-xl p-8 mb-8 text-sm leading-relaxed">
                        <!-- Content will be injected via JS -->
                    </div>

                    <div class="my-4 text-center">
                      <div class="loading hidden text-brand-600 font-bold animate-pulse">Processing...</div>
                      <div class="error-message hidden text-red-500 font-bold p-3 bg-red-100 rounded-lg"></div>
                    </div>
                    <div class="flex justify-center">
                        <button type="submit" class="px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 shadow-lg shadow-green-600/30 transform hover:scale-105 transition hoverable">
                            <span data-en="Submit CV Details" data-si="CV තොරතුරු ඉදිරිපත් කරන්න">Submit CV Details</span>
                        </button>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-10 pt-6 border-t border-gray-100 dark:border-gray-700">
                    <button type="button" id="prev-btn" class="hidden px-6 py-2.5 rounded-full border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition font-medium hoverable" data-en="Previous" data-si="පෙර">Previous</button>
                    <div class="flex-grow"></div> <!-- Spacer -->
                    <button type="button" id="skip-btn" class="px-6 py-2.5 rounded-full text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition font-medium mr-2 hoverable" data-en="Skip" data-si="මඟහරින්න">Skip</button>
                    <button type="button" id="next-btn" class="px-8 py-2.5 bg-brand-600 text-white rounded-full font-medium hover:bg-brand-500 transition shadow-lg shadow-brand-500/30 hoverable">
                        <span data-en="Next" data-si="ඊළඟ">Next</span>
                    </button>
                </div>

            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="relative bg-gray-900 dark:bg-black text-white pt-20 pb-10 overflow-hidden border-t border-gray-800">
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
            <div class="absolute -top-24 -right-24 w-96 h-96 bg-brand-600/10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 bg-brand-400/10 rounded-full blur-3xl"></div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                
                <div class="space-y-6">
                    <a href="index.html" class="inline-block hoverable">
                        <img src="assets/img/Sitelogow.png" alt="Propix Lk" class="h-9 w-auto">
                    </a>
                    <p class="text-gray-400 text-sm leading-relaxed max-w-xs">
                    Smart Design. Sharp Pixels.
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://www.facebook.com/share/1Bj9wAdLRN/" class="w-10 h-10 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-gray-400 hover:text-white hover:bg-brand-600 hover:border-brand-500 transition-all duration-300 hoverable group">
                            <i data-lucide="facebook" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        </a>
                        <a href="https://www.tiktok.com/@propix_lk" class="w-10 h-10 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-gray-400 hover:text-white hover:bg-brand-600 hover:border-brand-500 transition-all duration-300 hoverable group">
                            <i data-lucide="music-2" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        </a>
                        <a href="https://t.me/propixlk" class="w-10 h-10 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-gray-400 hover:text-white hover:bg-brand-600 hover:border-brand-500 transition-all duration-300 hoverable group">
                            <i data-lucide="send" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                        </a>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-display font-bold mb-6 text-white">Quick Links</h3>
                    <ul class="space-y-4">
                        <li>
                            <a href="index.html" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Home
                            </a>
                        </li>
                        <li>
                            <a href="#about" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> About Us
                            </a>
                        </li>
                        <li>
                            <a href="index.html#portfolio" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Work
                            </a>
                        </li>
                        <li>
                            <a href="index.html#services" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Services
                            </a>
                        </li>
                        <li>
                            <a href="index.html#faq" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> FAQ
                            </a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-display font-bold mb-6 text-white">Other Links</h3>
                    <ul class="space-y-4">
                        <li>
                            <a href="portfolio.html" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Portfolio
                            </a>
                        </li>
                        <li>
                            <a href='Price-List.html'" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Price List
                            </a>
                        </li>
                        <li>
                            <a href="gift.html" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Gift Section
                            </a>
                        </li>
                        <li>
                            <a href="update.html" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> Packages
                            </a>
                        </li>
                        <li>
                            <a href="cv.html" class="text-gray-400 hover:text-brand-400 transition-colors duration-200 flex items-center gap-2 hoverable group">
                                <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600 group-hover:text-brand-500 transition-colors"></i> CV Design
                            </a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-display font-bold mb-6 text-white">Get in Touch</h3>
                    <div class="space-y-4">
                        <div class="flex items-start gap-4 group hoverable">
                            <div class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center flex-shrink-0 group-hover:bg-brand-900/50 transition-colors">
                                <i data-lucide="mail" class="w-5 h-5 text-brand-400"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-1">Email</p>
                                <a href="mailto:propixlk@gmail.com" class="text-gray-300 hover:text-white transition-colors">propixlk@gmail.com</a>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-4 group hoverable">
                            <div class="w-10 h-10 rounded-lg bg-gray-800 flex items-center justify-center flex-shrink-0 group-hover:bg-brand-900/50 transition-colors">
                                <i data-lucide="message-square" class="w-5 h-5 text-brand-400"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-1">WhatsApp</p>
                                <a href="https://wa.me/message/JGOBR5KKO5UAF1" class="text-gray-300 hover:text-white transition-colors">Chat with us</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-sm text-gray-500 text-center md:text-left">
                    &copy; 2024 - 2026 <span class="text-brand-400 font-bold">Propix LK</span>. All rights reserved.
                </p>
                <div class="flex gap-6 text-sm">
                    <a href="privacy-policy.html" class="text-gray-500 hover:text-white transition-colors hoverable">Privacy Policy</a>
                    <a href="terms_and_conditions.html" class="text-gray-500 hover:text-white transition-colors hoverable">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Success Popup -->
    <div id="thank-you-popup" class="popup-overlay fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm">
        <div class="popup-content bg-white dark:bg-dark-card p-8 rounded-2xl shadow-2xl text-center max-w-md w-full mx-4 transform scale-90 transition-transform">
            <div class="popup-icon mx-auto mb-4">
                <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-gray-900 dark:text-white" data-en="Thank You!" data-si="ස්තූතියි!">Thank You!</h2>
            <p class="text-gray-500 dark:text-gray-400 mb-6" data-en="Your CV details have been submitted successfully. We will contact you shortly." data-si="ඔබගේ CV තොරතුරු සාර්ථකව ඉදිරිපත් කරන ලදී. අපි ඔබව ඉක්මනින් සම්බන්ධ කර ගන්නෙමු.">Your CV details have been submitted successfully. We will contact you shortly.</p>
            <a href="index.html" class="inline-block px-6 py-3 bg-brand-600 text-white font-bold rounded-lg hover:bg-brand-500 transition shadow-lg shadow-brand-500/30">
                <span data-en="Go to Home" data-si="මුල් පිටුවට යන්න">Go to Home</span>
            </a>
        </div>
    </div>

    <!-- Script Logic -->
    <script>
        lucide.createIcons();

        // --- Dark Mode Logic (From Index) ---
        function toggleDarkMode() {
    const isDark = document.documentElement.classList.toggle('dark');
    // තෝරාගත් theme එක browser එකේ save කිරීම
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
}
        
        // --- Cursor Logic (From Index) ---
        const cursor = document.getElementById('customCursor');
        const hoverables = document.querySelectorAll('.hoverable, a, button, input, textarea, select');
        document.addEventListener('mousemove', (e) => {
            if(cursor) {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            }
        });
        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => cursor?.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor?.classList.remove('hovered'));
        });

        // --- Mobile Menu ---
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        if(btn) {
            btn.addEventListener('click', () => { menu.classList.toggle('hidden'); });
            menu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => { menu.classList.add('hidden'); });
            });
        }

        // --- Wizard Logic (Adapted from CV.html) ---
        document.addEventListener('DOMContentLoaded', function() {
            let currentStep = 1;
            const totalSteps = 7;
            const formSteps = document.querySelectorAll('.form-step');
            const stepIndicators = document.querySelectorAll('.step-indicator-item');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const skipBtn = document.getElementById('skip-btn');
            const cvForm = document.getElementById('cv-form');
            const langToggleBtn = document.getElementById('lang-toggle');
            let currentLang = 'en';

            const translations = {
                next: { en: 'Next', si: 'ඊළඟ' },
                reviewFinish: { en: 'Review & Finish', si: 'සමාලෝචනය කර අවසන් කරන්න' },
                addEducation: { en: 'Add Education', si: 'අධ්‍යාපනයක් එක් කරන්න' },
                addExperience: { en: 'Add Experience', si: 'පළපුරුද්දක් එක් කරන්න' },
                addReference: { en: 'Add Reference', si: 'නිර්දේශයක් එක් කරන්න' },
                educationHeading: { en: 'Education', si: 'අධ්‍යාපන සුදුසුකම්' },
                qualType: { en: 'Qualification Type', si: 'සුදුසුකම් වර්ගය' },
                degreePG: { en: 'Degree / Post-Graduate', si: 'උපාධිය / පශ්චාත් උපාධිය' },
                al: { en: 'A/L (Advanced Level)', si: 'උ/පෙළ (උසස් පෙළ)' },
                ol: { en: 'O/L (Ordinary Level)', si: 'සා/පෙළ (සාමාන්‍ය පෙළ)' },
                profQual: { en: 'Professional Qualification / Diploma', si: 'වෘත්තීය සුදුසුකම / ඩිප්ලෝමාව' },
                institutionPlaceholder: { en: 'Name of Institution / School', si: 'ආයතනයේ / පාසලේ නම' },
                coursePlaceholder: { en: 'Name of Course / Examination', si: 'පාඨමාලාවේ / විභාගයේ නම' },
                degreePlaceholder: { en: 'Degree / Diploma Obtained', si: 'ලබාගත් උපාධිය / ඩිප්ලෝමාව' },
                specializationPlaceholder: { en: 'Specialization (if any)', si: 'විශේෂීකරණය (ඇත්නම්)' },
                startYearPlaceholder: { en: 'Start Year', si: 'ආරම්භක වර්ෂය' },
                endYearPlaceholder: { en: 'End Year', si: 'අවසාන වර්ෂය' },
                indexPlaceholder: { en: 'Index Number (for A/L, O/L)', si: 'විභාග අංකය (උ/පෙළ, සා/පෙළ සඳහා)' },
                resultsPlaceholder: { en: 'Subjects and Grades / Results', si: 'විෂයයන් සහ ශ්‍රේණි / ප්‍රතිඵල' },
                experienceHeading: { en: 'Experience', si: 'සේවා පළපුරුද්ද' },
                companyPlaceholder: { en: 'Company Name', si: 'සමාගමේ නම' },
                jobTitlePlaceholder: { en: 'Job Title', si: 'රැකියාවේ තනතුර' },
                fromPlaceholder: { en: 'From Date (e.g., Jan 2020)', si: 'සිට (උදා: ජන 2020)' },
                toPlaceholder: { en: 'To Date (e.g., Present)', si: 'දක්වා (උදා: වර්තමාන)' },
                dutiesPlaceholder: { en: 'Responsibilities and Duties', si: 'වගකීම් සහ රාජකාරි' },
                referenceHeading: { en: 'Reference', si: 'නිර්දේශය' },
                refNamePlaceholder: { en: 'Name', si: 'නම' },
                refTitlePlaceholder: { en: 'Job Title', si: 'රැකියාවේ තනතුර' },
                refOrgPlaceholder: { en: 'Organization', si: 'සංවිධානය' },
                refPhonePlaceholder: { en: 'Phone Number', si: 'දුරකථන අංකය' },
            };

            function setLanguage(lang) {
                document.querySelectorAll('[data-en]').forEach(el => {
                    const text = el.getAttribute(`data-${lang}`);
                    if (text) {
                        if (el.tagName === 'BUTTON' && el.querySelector('span[data-en]')) {
                            el.querySelector('span[data-en]').innerHTML = text;
                        } else {
                            el.innerHTML = text;
                        }
                    }
                });
                document.querySelectorAll('[data-en-placeholder]').forEach(el => {
                    const text = el.getAttribute(`data-${lang}-placeholder`);
                    if(text) {
                        el.placeholder = text;
                    }
                });

                langToggleBtn.textContent = lang === 'en' ? 'සිංහල' : 'English';
                currentLang = lang;
                updateButtons(); 
                if(currentStep === totalSteps) {
                    generateReview();
                }
            }

            langToggleBtn.addEventListener('click', () => {
                const newLang = currentLang === 'en' ? 'si' : 'en';
                setLanguage(newLang);
            });

            function T(key) {
                return translations[key] ? translations[key][currentLang] : key;
            }

            function updateButtons() {
                prevBtn.style.display = currentStep > 1 ? 'inline-block' : 'none';
                prevBtn.classList.toggle('hidden', currentStep <= 1);
                
                skipBtn.style.display = currentStep < totalSteps - 1 ? 'inline-block' : 'none';
                
                if (currentStep === totalSteps - 1) {
                    nextBtn.querySelector('span').textContent = T('reviewFinish');
                    nextBtn.style.display = 'inline-block';
                } else if (currentStep === totalSteps) {
                    nextBtn.style.display = 'none';
                    skipBtn.style.display = 'none';
                } else {
                    nextBtn.querySelector('span').textContent = T('next');
                    nextBtn.style.display = 'inline-block';
                }
            }

            function goToStep(step) {
                formSteps.forEach(s => s.classList.remove('active'));
                document.querySelector(`.form-step[data-step="${step}"]`).classList.add('active');
                
                stepIndicators.forEach(ind => {
                    const indStep = parseInt(ind.dataset.step);
                    if (indStep < step) {
                        ind.classList.add('completed');
                        ind.classList.remove('active');
                    } else if (indStep === step) {
                        ind.classList.add('active');
                        ind.classList.remove('completed');
                    } else {
                        ind.classList.remove('active', 'completed');
                    }
                });
                
                currentStep = step;
                updateButtons();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            nextBtn.addEventListener('click', () => {
                if (currentStep < totalSteps) {
                    if(currentStep === totalSteps - 1) { 
                        generateReview();
                    }
                    goToStep(currentStep + 1);
                }
            });

            prevBtn.addEventListener('click', () => {
                if (currentStep > 1) {
                    goToStep(currentStep - 1);
                }
            });
            
            skipBtn.addEventListener('click', () => {
                if (currentStep < totalSteps - 1) {
                    goToStep(currentStep + 1);
                }
            });

            // Dynamic Fields with Tailwind Classes
            const inputClass = "bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-brand-500 focus:border-brand-500 block w-full p-3 dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition hoverable";

            let eduCount = 0;
            document.getElementById('add-education').addEventListener('click', () => {
                eduCount++;
                const container = document.getElementById('education-container');
                const newEdu = document.createElement('div');
                newEdu.classList.add('relative', 'p-6', 'bg-gray-50', 'dark:bg-gray-800/50', 'rounded-xl', 'border', 'border-gray-200', 'dark:border-gray-700');
                newEdu.innerHTML = `
                    <button type="button" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition remove-btn">
                        <i data-lucide="x-circle" class="w-6 h-6"></i>
                    </button>
                    <h5 class="text-lg font-bold mb-4 text-brand-600 dark:text-brand-400">${T('educationHeading')} #${eduCount}</h5>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">${T('qualType')}</label>
                            <select name="education[${eduCount}][type]" class="${inputClass}">
                                <option>${T('degreePG')}</option>
                                <option>${T('al')}</option>
                                <option>${T('ol')}</option>
                                <option>${T('profQual')}</option>
                            </select>
                        </div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][institution]" placeholder="${T('institutionPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][course]" placeholder="${T('coursePlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][degree]" placeholder="${T('degreePlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][specialization]" placeholder="${T('specializationPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][startYear]" placeholder="${T('startYearPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="education[${eduCount}][endYear]" placeholder="${T('endYearPlaceholder')}"></div>
                        <div class="md:col-span-2"><input type="text" class="${inputClass}" name="education[${eduCount}][indexNumber]" placeholder="${T('indexPlaceholder')}"></div>
                        <div class="md:col-span-2"><textarea class="${inputClass}" name="education[${eduCount}][results]" rows="3" placeholder="${T('resultsPlaceholder')}"></textarea></div>
                    </div>
                `;
                container.appendChild(newEdu);
                lucide.createIcons();
            });

            let expCount = 0;
            document.getElementById('add-experience').addEventListener('click', () => {
                expCount++;
                const container = document.getElementById('experience-container');
                const newExp = document.createElement('div');
                newExp.classList.add('relative', 'p-6', 'bg-gray-50', 'dark:bg-gray-800/50', 'rounded-xl', 'border', 'border-gray-200', 'dark:border-gray-700');
                newExp.innerHTML = `
                    <button type="button" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition remove-btn">
                         <i data-lucide="x-circle" class="w-6 h-6"></i>
                    </button>
                    <h5 class="text-lg font-bold mb-4 text-brand-600 dark:text-brand-400">${T('experienceHeading')} #${expCount}</h5>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div><input type="text" class="${inputClass}" name="experience[${expCount}][company]" placeholder="${T('companyPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="experience[${expCount}][title]" placeholder="${T('jobTitlePlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="experience[${expCount}][from]" placeholder="${T('fromPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="experience[${expCount}][to]" placeholder="${T('toPlaceholder')}"></div>
                        <div class="md:col-span-2"><textarea class="${inputClass}" name="experience[${expCount}][duties]" rows="3" placeholder="${T('dutiesPlaceholder')}"></textarea></div>
                    </div>
                `;
                container.appendChild(newExp);
                lucide.createIcons();
            });
            
            let refCount = 0;
            document.getElementById('add-reference').addEventListener('click', () => {
                refCount++;
                const container = document.getElementById('references-container');
                const newRef = document.createElement('div');
                newRef.classList.add('relative', 'p-6', 'bg-gray-50', 'dark:bg-gray-800/50', 'rounded-xl', 'border', 'border-gray-200', 'dark:border-gray-700');
                newRef.innerHTML = `
                    <button type="button" class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition remove-btn">
                         <i data-lucide="x-circle" class="w-6 h-6"></i>
                    </button>
                    <h5 class="text-lg font-bold mb-4 text-brand-600 dark:text-brand-400">${T('referenceHeading')} #${refCount}</h5>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div><input type="text" class="${inputClass}" name="reference[${refCount}][name]" placeholder="${T('refNamePlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="reference[${refCount}][title]" placeholder="${T('refTitlePlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="reference[${refCount}][org]" placeholder="${T('refOrgPlaceholder')}"></div>
                        <div><input type="text" class="${inputClass}" name="reference[${refCount}][phone]" placeholder="${T('refPhonePlaceholder')}"></div>
                    </div>
                `;
                container.appendChild(newRef);
                lucide.createIcons();
            });

            document.addEventListener('click', function(e) {
                if (e.target && (e.target.classList.contains('remove-btn') || e.target.closest('.remove-btn'))) {
                    e.target.closest('.relative').remove(); // The container has class 'relative'
                }
            });
            
            document.querySelectorAll('.design-template').forEach(item => {
                item.addEventListener('click', () => {
                    document.querySelectorAll('.design-template').forEach(i => i.classList.remove('selected'));
                    item.classList.add('selected');
                    document.getElementById('selectedDesign').value = item.dataset.designName;
                });
            });
            
            function generateReview() {
                const reviewSection = document.getElementById('review-section');
                const formData = new FormData(cvForm);
                const entries = {};
                for (let [key, value] of formData.entries()) {
                    if (value) {
                        const match = key.match(/(\w+)\[(\d+)\]\[(\w+)\]/);
                        if (match) {
                            const [, section, index, field] = match;
                            if (!entries[section]) entries[section] = {};
                            if (!entries[section][index]) entries[section][index] = {};
                            entries[section][index][field] = value;
                        } else if (key.endsWith('[]')) {
                            const cleanKey = key.slice(0, -2);
                            if (!entries[cleanKey]) entries[cleanKey] = [];
                            entries[cleanKey].push(value);
                        } else {
                            entries[key] = value;
                        }
                    }
                }
                
                const t_review = (en, si) => currentLang === 'si' ? si : en;

                // Simple HTML structure for review - Clean and minimal
                let reviewHTML = `
                <div class="max-w-3xl mx-auto font-sans">
                    <header class="border-b-4 border-brand-600 pb-6 mb-6 text-center">
                        <h1 class="text-3xl font-bold uppercase tracking-wider text-gray-900">${entries.fullName || 'Your Name'}</h1>
                        <p class="text-lg text-gray-600 mt-2">${entries.jobType || 'Job Title'}</p>
                    </header>
                    
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="flex-grow space-y-8">
                            ${entries.aboutYou ? `
                            <section>
                                <h4 class="text-lg font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Profile', 'පුද්ගලික තොරතුරු')}</h4>
                                <p class="text-gray-700 whitespace-pre-line">${(entries.aboutYou || '')}</p>
                            </section>` : ''}

                            ${entries.experience ? `
                            <section>
                                <h4 class="text-lg font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Work Experience', 'සේවා පළපුරුද්ද')}</h4>
                                ${Object.values(entries.experience).map(exp => `
                                    <div class="mb-4">
                                        <h5 class="font-bold text-gray-800">${exp.title || ''}</h5>
                                        <div class="text-sm text-gray-600 italic mb-1">${exp.company || ''} | ${exp.from || ''} - ${exp.to || ''}</div>
                                        <p class="text-gray-700 text-sm whitespace-pre-line">${(exp.duties || '')}</p>
                                    </div>
                                `).join('')}
                            </section>` : ''}

                            ${entries.education ? `
                            <section>
                                <h4 class="text-lg font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Education', 'අධ්‍යාපනය')}</h4>
                                ${Object.values(entries.education).map(edu => `
                                    <div class="mb-4">
                                        <h5 class="font-bold text-gray-800">${edu.degree || edu.course || ''}</h5>
                                        <div class="text-sm text-gray-600 italic mb-1">${edu.institution || ''} | ${edu.startYear || ''} - ${edu.endYear || ''}</div>
                                        <p class="text-gray-700 text-sm whitespace-pre-line">${(edu.results || '')}</p>
                                    </div>
                                `).join('')}
                            </section>` : ''}
                            
                            ${entries.awards ? `
                            <section>
                                <h4 class="text-lg font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Awards & Achievements', 'සම්මාන හා ජයග්‍රහණ')}</h4>
                                <p class="text-gray-700 whitespace-pre-line">${(entries.awards || '')}</p>
                            </section>` : ''}
                        </div>

                        <div class="w-full md:w-1/3 bg-gray-50 p-6 rounded-lg space-y-8 h-fit">
                            <section>
                                <h4 class="text-base font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Contact', 'සම්බන්ධ කරගැනීමට')}</h4>
                                <div class="space-y-2 text-sm text-gray-700 break-words">
                                    ${entries.phone ? `<div class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> ${entries.phone}</div>` : ''}
                                    ${entries.email ? `<div class="flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> ${entries.email}</div>` : ''}
                                    ${entries.address ? `<div class="flex items-center gap-2"><i data-lucide="map-pin" class="w-4 h-4"></i> ${entries.address}</div>` : ''}
                                    ${entries.portfolioLink ? `<div class="flex items-center gap-2"><i data-lucide="globe" class="w-4 h-4"></i> <a href="${entries.portfolioLink}" target="_blank" class="text-blue-600 hover:underline">Portfolio</a></div>` : ''}
                                </div>
                            </section>

                            ${(entries.otherSkills) ? `
                            <section>
                                <h4 class="text-base font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Skills', 'කුසලතා')}</h4>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                    ${(entries.otherSkills).split(/[,\n]/).map(skill => skill.trim() ? `<li>${skill.trim()}</li>` : '').join('')}
                                </ul>
                            </section>` : ''}
                            
                            ${(entries.languageSkills || entries.otherLanguages) ? `
                            <section>
                                <h4 class="text-base font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Languages', 'භාෂා')}</h4>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                    ${entries.languageSkills ? `<li>${entries.languageSkills.join(', ')}</li>` : ''}
                                    ${entries.otherLanguages ? `<li>${entries.otherLanguages}</li>` : ''}
                                </ul>
                            </section>` : ''}
                            
                            <section>
                                <h4 class="text-base font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('References', 'නිර්දේශ')}</h4>
                                ${entries.reference ? Object.values(entries.reference).map(ref => `
                                    <div class="mb-3 text-sm">
                                        <div class="font-bold text-gray-800">${ref.name || ''}</div>
                                        <div class="text-gray-600">${ref.title || ''}</div>
                                        <div class="text-gray-600">${ref.org || ''}</div>
                                        <div class="text-gray-600">${ref.phone || ''}</div>
                                    </div>
                                `).join('') : `<p class="text-sm text-gray-500 italic">${t_review('Available upon request.', 'ඉල්ලීම මත ලබා ගත හැක.')}</p>`}
                            </section>

                            <section>
                                <h4 class="text-base font-bold uppercase text-brand-600 mb-3 border-b border-gray-200 pb-1">${t_review('Design Choice', 'නිර්මාණ තේරීම')}</h4>
                                <p class="text-sm font-medium text-gray-800 bg-brand-100 inline-block px-2 py-1 rounded">${entries.selectedDesign || 'Not Selected'}</p>
                            </section>
                        </div>
                    </div>
                </div>`;
                
                reviewSection.innerHTML = reviewHTML;
                lucide.createIcons();
            }
            
            // Submission Logic (Unchanged URL)
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby6wE-A4hbRsMAJG1eAZo_-K_ub4nQTfj_DvdJipw88qrLk6vqvMjKbxjihWlrQtQteJA/exec'; 

            cvForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const form = e.target;
                const submitButton = form.querySelector('button[type="submit"]');
                const loading = document.querySelector('.loading');
                const errorMessage = document.querySelector('.error-message');
                const thankYouPopup = document.getElementById('thank-you-popup');

                submitButton.disabled = true;
                submitButton.classList.add('opacity-50', 'cursor-not-allowed');
                loading.classList.remove('hidden');
                errorMessage.classList.add('hidden');

                const formData = new FormData(form);

                fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: formData
                })
                .then(res => res.json())
                .then(data => {
                    if (data.result === "success") {
                        setLanguage(currentLang); 
                        thankYouPopup.classList.add('show');
                        
                        // Close popup after 3 seconds or via user action could be added here
                        // For now it has a "Go to Home" button
                        
                        form.reset();
                    } else {
                        throw new Error(data.error || 'An unknown error occurred in the script.');
                    }
                })
                .catch(error => {
                    console.error('Submission Error!', error);
                    errorMessage.textContent = 'Oops! There was a problem submitting your form. ' + error.message;
                    errorMessage.classList.remove('hidden');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    loading.classList.add('hidden');
                });
            });

            // Initialize
            goToStep(1);
            document.getElementById('add-education').click();
            document.getElementById('add-experience').click();
            setLanguage(currentLang);
        });
    </script>
</body>
</html>