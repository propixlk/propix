<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICT 1402 - Principles of Program Design</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+Sinhala:wght@400;600&display=swap');
        body { font-family: 'Inter', 'Noto Sans Sinhala', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen">

    <!-- Navbar -->
    <nav class="bg-blue-900 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold">ICT 1402 Answers</h1>
                <p class="text-xs text-blue-200">Principles of Program Design</p>
            </div>
            <div class="text-right">
                <div class="text-sm font-light opacity-80">ලකුණු (Score)</div>
                <div class="text-2xl font-bold" id="score-display">0 / 0</div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto px-4 py-8">

        <!-- Paper Selector -->
        <div class="bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-col sm:flex-row gap-4 justify-between items-center border border-slate-200">
            <div class="flex gap-2 bg-slate-100 p-1 rounded-lg">
                <button onclick="switchPaper(0)" id="btn-paper1" class="px-4 py-2 rounded-md text-sm font-semibold transition-all shadow-sm bg-white text-blue-700">2021/2022 Batch</button>
                <button onclick="switchPaper(1)" id="btn-paper2" class="px-4 py-2 rounded-md text-sm font-semibold transition-all text-slate-500 hover:text-slate-700">2022/2023 Batch</button>
            </div>
            <button onclick="resetQuiz()" class="text-slate-500 hover:text-red-500 text-sm font-medium flex items-center gap-2">
                <i class="fas fa-rotate-right"></i> Reset Progress
            </button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-6">
            <!-- Questions will be injected here -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-400 py-6 text-center text-sm">
        <p>Created for ICT 1402 Revision.</p>
    </footer>

    <script>
        // Data Structure
        const papers = [
            {
                id: "p1",
                title: "2021/2022 Batch (Paper 1)",
                questions: [
                    { id: 1, correct: ['a'], label: 'a (or a, b, d)', reason: '"Number of emails" is data; "Trend analysis" is information produced from that data. Options b and d are also valid Data -> Information relationships.' },
                    { id: 2, correct: ['d'], label: 'd', reason: 'Machine language instructions correspond to specific operations, are binary encoded, and are architecture-specific.' },
                    { id: 3, correct: ['b'], label: 'b', reason: 'X converts Source to Object/Assembly (Compiler), Y converts Assembly to Machine Code (Assembler).' },
                    { id: 4, correct: ['a'], label: 'a', reason: 'The Von Neumann architecture defines the hardware framework and the stored-program concept (programming/data stored together).' },
                    { id: 5, correct: ['c', 'd'], label: 'c, d', reason: 'Device Drivers are System Software; Email clients are Application Software.' },
                    { id: 6, correct: ['a'], label: 'a', reason: 'Logic: Total Area = 2 * (L*H + W*H). Paint = Area / Coverage.' },
                    { id: 7, correct: ['a', 'd'], label: 'a, d', reason: 'Assembly is NOT slower (it is faster/efficient) and is NOT user-friendly. Both statements are false.' },
                    { id: 8, correct: ['a'], label: 'a', reason: 'Standard SDLC: Spec -> Design -> Code -> Test -> Maintain.' },
                    { id: 9, correct: ['a'], label: 'a', reason: 'Prints 4 rows (c=1 to 4). The pattern ***** is compact.' },
                    { id: 10, correct: ['c'], label: 'c', reason: 'Testing verifies intended function and identifies bugs.' },
                    { id: 11, correct: ['c'], label: 'c', reason: 'The task list inputs ("enters") the GPAs into the system.' },
                    { id: 12, correct: ['a'], label: 'a', reason: 'Flowcharts use Sequence, Selection, Iteration (A) and flowlines show control flow (C). Statement B is false (Sequence has 1 exit).' },
                    { id: 13, correct: ['c', 'b'], label: 'c (or b)', reason: 'Until loops repeat while false (stop when true), While loops repeat while true. This is the logical difference.' },
                    { id: 14, correct: ['b'], label: 'b', reason: 'Internal processes are within the system; External processes interact with outside entities.' },
                    { id: 15, correct: ['a'], label: 'a', reason: 'The logic prints col, row. Pass 1: 0<=2 (Inc->1), 1<=2 -> Print 1, 1. row becomes 2 -> Print 1, 2. row becomes 3 (Stop).' },
                    { id: 16, correct: ['d'], label: 'd', reason: 'To obtain 0102, we must remove the first increment (Process 1). No option proposes only this. Option A adds a row reset which would produce 01021112....' },
                    { id: 17, correct: ['d', 'a', 'c'], label: 'd (or a, c, d)', reason: 'Keeping pseudocode language-independent is a critical rule.' },
                    { id: 18, correct: ['d'], label: 'd', reason: 'The logic While j < i produces a triangle pattern (1 star, then 2 stars, etc.). Option d depicts a growing shape.' },
                    { id: 19, correct: ['b', 'c', 'd'], label: 'b, c, d', reason: 'Searching is an algorithm (A is false). 3GLs are procedural (B is true). Until is post-test (C is true). While exits on false (D is true).' },
                    { id: 20, correct: ['a'], label: 'a', reason: 'Variables are named storage locations.' }
                ]
            },
            {
                id: "p2",
                title: "2022/2023 Batch (Paper 2)",
                questions: [
                    { id: 1, correct: ['a', 'b', 'c'], label: 'a, b, c', reason: 'All three represent valid Data -> Processed Information transformations.' },
                    { id: 2, correct: ['d'], label: 'd', reason: 'Calculation and format conversion are processing; storing is also often included in the broad definition.' },
                    { id: 3, correct: ['a', 'd'], label: 'a, d', reason: 'Machine code is binary/native (a). High-level requires translation (d).' },
                    { id: 4, correct: ['b'], label: 'b', reason: 'Stored Program Concept means programs are stored in memory (A) and can be manipulated as data (C).' },
                    { id: 5, correct: ['a'], label: 'a', reason: 'Correct classification: 2GL (Assembly), 3GL (Java/Python), 4GL (SQL).' },
                    { id: 6, correct: ['d'], label: 'd', reason: 'Reviewing specifications ensures Inputs, Outputs, and Processing are defined.' },
                    { id: 7, correct: ['d'], label: 'd', reason: 'Desk checking validates the logic of the algorithm.' },
                    { id: 8, correct: ['c', 'd'], label: 'c (or d)', reason: '1 to 5 implies n <= 5 (c) or n < 6 (d). n <= 5 is the standard integer loop representation.' },
                    { id: 9, correct: ['b'], label: 'b', reason: 'Until (Post-test) guarantees execution at least once. While (Pre-test) does not.' },
                    { id: 10, correct: ['a'], label: 'a', reason: 'You must Read G inside the loop to update the guess. Options b and d check G without updating it (infinite loop).' },
                    { id: 11, correct: ['b'], label: 'b', reason: 'Read (Input), Init (Process/Prep), Calc (Process), Module (Internal Process/Striped).' },
                    { id: 12, correct: ['b'], label: 'b', reason: 'A program can have multiple internal processes/modules.' },
                    { id: 13, correct: ['b'], label: 'b', reason: 'A variable is a named storage location.' },
                    { id: 14, correct: ['d'], label: 'd', reason: 'Note: The flowchart has a bug (C is not reset). Strict output is one row. However, in exams, Option D (the full block 4x3) is the intended answer matching the structure.' },
                    { id: 15, correct: ['b'], label: 'b', reason: 'Removing C=C+1 removes the loop progress, causing an infinite loop.' },
                    { id: 16, correct: ['b'], label: 'b', reason: 'A standard pre-test loop corresponds to WHILE.' },
                    { id: 17, correct: ['b'], label: 'b', reason: 'Main flow uses the Module symbol (striped). The Module flow ends with RETURN.' },
                    { id: 18, correct: ['d'], label: 'd', reason: 'Matches the logic: Root X>10 -> True (Y<10 check) / False (X>3 check).' },
                    { id: 19, correct: ['c'], label: 'c', reason: 'Algorithms must be unambiguous. (They are finite, so A is false. They produce output, so D is false).' },
                    { id: 20, correct: ['b'], label: 'b', reason: 'The three structures are Sequence, Selection, and Iteration.' }
                ]
            }
        ];

        let currentPaperIndex = 0;
        let score = 0;
        let answeredCount = 0;
        // Store answered status: { "p1-1": true, ... }
        let answeredMap = {}; 

        function init() {
            renderQuiz();
            updateScoreUI();
        }

        function switchPaper(index) {
            currentPaperIndex = index;
            
            // Update Tab Styles
            const btn1 = document.getElementById('btn-paper1');
            const btn2 = document.getElementById('btn-paper2');
            
            if(index === 0) {
                btn1.classList.replace('text-slate-500', 'text-blue-700');
                btn1.classList.replace('bg-transparent', 'bg-white');
                btn1.classList.add('shadow-sm');
                
                btn2.classList.replace('text-blue-700', 'text-slate-500');
                btn2.classList.replace('bg-white', 'bg-transparent');
                btn2.classList.remove('shadow-sm');
            } else {
                btn2.classList.replace('text-slate-500', 'text-blue-700');
                btn2.classList.replace('bg-transparent', 'bg-white');
                btn2.classList.add('shadow-sm');

                btn1.classList.replace('text-blue-700', 'text-slate-500');
                btn1.classList.replace('bg-white', 'bg-transparent');
                btn1.classList.remove('shadow-sm');
            }

            // Recalculate score based on the current paper's answered questions
            recalcScoreForCurrentPaper();
            renderQuiz();
        }

        function recalcScoreForCurrentPaper() {
            const paper = papers[currentPaperIndex];
            score = 0;
            answeredCount = 0;
            
            paper.questions.forEach(q => {
                const key = `${paper.id}-${q.id}`;
                if (answeredMap[key]) {
                    answeredCount++;
                    if (answeredMap[key].correct) {
                        score++;
                    }
                }
            });
            updateScoreUI();
        }

        function updateScoreUI() {
            const paper = papers[currentPaperIndex];
            const total = paper.questions.length;
            document.getElementById('score-display').innerText = `${score} / ${total}`;
        }

        function resetQuiz() {
            if(confirm("Are you sure you want to clear all your answers?")) {
                answeredMap = {};
                score = 0;
                answeredCount = 0;
                renderQuiz();
                updateScoreUI();
            }
        }

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            const paper = papers[currentPaperIndex];
            const options = ['a', 'b', 'c', 'd'];

            paper.questions.forEach((q, index) => {
                const questionKey = `${paper.id}-${q.id}`;
                const isAnswered = answeredMap[questionKey] !== undefined;
                const userSelection = isAnswered ? answeredMap[questionKey].selection : null;
                const isCorrect = isAnswered ? answeredMap[questionKey].correct : false;

                // Card
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl shadow-sm border border-slate-200 fade-in";

                // Header (Q Number)
                const header = document.createElement('div');
                header.className = "flex justify-between items-center mb-4";
                header.innerHTML = `
                    <h3 class="text-lg font-bold text-slate-700">Question ${q.id}</h3>
                    ${isAnswered 
                        ? (isCorrect 
                            ? '<span class="px-3 py-1 bg-green-100 text-green-700 text-xs font-bold uppercase rounded-full">Correct</span>' 
                            : '<span class="px-3 py-1 bg-red-100 text-red-700 text-xs font-bold uppercase rounded-full">Incorrect</span>')
                        : '<span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-medium uppercase rounded-full">Pending</span>'
                    }
                `;
                card.appendChild(header);

                // Options Container
                const optionsDiv = document.createElement('div');
                optionsDiv.className = "grid grid-cols-4 gap-2 mb-4";

                options.forEach(opt => {
                    const btn = document.createElement('button');
                    const isSelected = userSelection === opt;
                    const isActualCorrect = q.correct.includes(opt);

                    let btnClass = "py-3 rounded-lg border-2 font-bold text-lg transition-all ";
                    
                    if (!isAnswered) {
                        // Default state
                        btnClass += "border-slate-200 text-slate-500 hover:border-blue-400 hover:text-blue-500 hover:bg-blue-50";
                        btn.onclick = () => handleAnswer(q.id, opt);
                    } else {
                        btn.disabled = true;
                        if (isSelected && isActualCorrect) {
                            // User picked correct
                            btnClass += "bg-green-500 border-green-500 text-white";
                        } else if (isSelected && !isActualCorrect) {
                            // User picked wrong
                            btnClass += "bg-red-500 border-red-500 text-white";
                        } else if (!isSelected && isActualCorrect) {
                            // The missed correct answer
                            btnClass += "bg-green-100 border-green-200 text-green-700"; // Show correct answer gently
                        } else {
                            // Other wrong answers
                            btnClass += "border-slate-100 text-slate-300";
                        }
                    }

                    btn.className = btnClass;
                    btn.innerText = opt.toUpperCase();
                    optionsDiv.appendChild(btn);
                });
                card.appendChild(optionsDiv);

                // Feedback Section (Reasoning)
                if (isAnswered) {
                    const feedback = document.createElement('div');
                    feedback.className = `mt-4 p-4 rounded-lg text-sm border-l-4 ${isCorrect ? 'bg-green-50 border-green-500' : 'bg-red-50 border-red-500'}`;
                    
                    feedback.innerHTML = `
                        <div class="font-semibold mb-1 ${isCorrect ? 'text-green-800' : 'text-red-800'}">
                            ${isCorrect ? '<i class="fas fa-check-circle mr-2"></i> නියමයි!' : '<i class="fas fa-times-circle mr-2"></i> වැරදියි.'}
                        </div>
                        <div class="mb-2">
                            <span class="font-bold text-slate-700">නිවැරදි පිළිතුර:</span> 
                            <span class="font-mono text-blue-700 bg-blue-100 px-1 rounded">${q.label}</span>
                        </div>
                        <div class="text-slate-700 leading-relaxed">
                            <span class="font-bold">හේතුව:</span> ${q.reason}
                        </div>
                    `;
                    card.appendChild(feedback);
                }

                container.appendChild(card);
            });
        }

        function handleAnswer(qId, selectedOption) {
            const paper = papers[currentPaperIndex];
            const q = paper.questions.find(item => item.id === qId);
            const isCorrect = q.correct.includes(selectedOption);
            const questionKey = `${paper.id}-${qId}`;

            // Save state
            answeredMap[questionKey] = {
                selection: selectedOption,
                correct: isCorrect
            };

            // Update stats
            if(isCorrect) score++;
            answeredCount++;

            // Refresh UI
            updateScoreUI();
            renderQuiz();
        }

        // Initialize
        init();

    </script>
</body>
</html>