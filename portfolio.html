<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio | BluePixel</title>
    <meta name="description" content="Explore our extensive portfolio of graphic design works.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: { 100:'#03abec', 200:'#1590ef', 300:'#1c86f1', 400:'#2e69f4', 500:'#3d53f7', 600:'#424cf6', 900:'#1a237e' },
                        dark: { bg:'#0b1121', card:'#1e293b', text:'#f8fafc', muted:'#cbd5e1' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Space Grotesk', 'sans-serif'] },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-in-out' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>

    <style>
        body { cursor: none; }
        @media (pointer: coarse) { body { cursor: auto; } .custom-cursor { display: none; } }
        .custom-cursor { position: fixed; top: 0; left: 0; width: 20px; height: 20px; border: 2px solid #424cf6; border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%); z-index: 9999; transition: transform 0.1s ease; mix-blend-mode: difference; }
        .custom-cursor.hovered { width: 40px; height: 40px; background-color: rgba(66, 76, 246, 0.3); border-color: transparent; }
        .gallery-column { column-count: 1; column-gap: 0; }
        @media (min-width: 640px) { .gallery-column { column-count: 2; } }
        @media (min-width: 768px) { .gallery-column { column-count: 3; } }
        @media (min-width: 1024px) { .gallery-column { column-count: 4; } }
        .gallery-item { break-inside: avoid; margin-bottom: 0; display: block; width: 100%; line-height: 0; position: relative; overflow: hidden; }
        .gallery-item img { transition: transform 0.5s ease; width: 100%; height: auto; display: block; }
        .gallery-item:hover img { transform: scale(1.05); }
        .filter-btn.active { background-color: #424cf6; color: white; border-color: #424cf6; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .dark .glass { background: rgba(11, 17, 33, 0.9); border-bottom: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body class="antialiased bg-white text-gray-900 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300">

    <div class="custom-cursor hidden md:block" id="customCursor"></div>

    <nav class="fixed w-full z-50 glass transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center cursor-pointer hoverable" onclick="window.location.href='index.html'">
                   <img src="assets/img/Sitelogo.png" alt="Logo" class="h-[50px] w-[200px] object-contain block dark:hidden"> 
                   <img src="assets/img/Sitelogow.png" alt="Logo" class="h-[50px] w-[200px] object-contain hidden dark:block"> 
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 font-medium hoverable">Home</a>
                    <a href="#services" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 font-medium hoverable">Services</a>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 hoverable">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                </div>
                 <div class="md:hidden flex items-center gap-4">
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                       <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                       <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                   </button>
                   <button id="mobile-menu-btn" class="text-gray-700 dark:text-white hover:text-brand-600">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                   </button>
               </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-dark-card absolute w-full border-b border-gray-100 dark:border-gray-800 shadow-lg top-20 left-0">
            <div class="px-4 pt-2 pb-6 space-y-2">
                <a href="index.html" class="block px-3 py-3 font-medium text-gray-700 dark:text-gray-200">Home</a>
            </div>
        </div>
    </nav>

    <section class="pt-32 pb-12 bg-gray-50 dark:bg-black/20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-5xl font-display font-bold text-gray-900 dark:text-white mb-4">Our Portfolio</h1>
            <p class="text-gray-500 dark:text-gray-400 max-w-2xl mx-auto mb-8">A curated collection of our finest work.</p>
            
            <div class="flex flex-wrap justify-center gap-3" id="filters">
                <button class="filter-btn active px-6 py-2 rounded-full border border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hoverable" onclick="filterGallery('all', this)">All</button>
                <button class="filter-btn px-6 py-2 rounded-full border border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hoverable" onclick="filterGallery('branding', this)">Branding</button>
                <button class="filter-btn px-6 py-2 rounded-full border border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hoverable" onclick="filterGallery('social', this)">Social Media</button>
                <button class="filter-btn px-6 py-2 rounded-full border border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hoverable" onclick="filterGallery('print', this)">Print</button>
                <button class="filter-btn px-6 py-2 rounded-full border border-gray-300 dark:border-gray-700 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hoverable" onclick="filterGallery('web', this)">Web</button>
            </div>
        </div>
    </section>

    <div class="w-full min-h-[50vh]">
        <div class="gallery-column w-full" id="gallery-container">
            <div id="loading-indicator" class="col-span-full text-center py-10 text-gray-500 w-full">Loading images...</div>
        </div>
    </div>

    <section class="bg-brand-50 dark:bg-brand-900/20 py-12 border-y border-brand-100 dark:border-brand-800/30">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <div class="flex flex-col md:flex-row items-center justify-center gap-6">
                <div><h3 class="text-2xl font-bold text-gray-900 dark:text-white">Quick design need?</h3></div>
                <button onclick="request()" class="px-8 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-lg hover:scale-105 transition transform shadow-lg hoverable">Request</button>
            </div>
        </div>
    </section>
    
    <footer class="bg-gray-900 dark:bg-black text-white pt-16 pb-8 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 text-center text-sm text-gray-400"><p>&copy; 2023 BluePixel Graphic Design.</p></div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- YOUR CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyDFpP6rzjNe14z8RgarxB-CAK28bHBNBiA",
            authDomain: "propix-lk-web-portfolio.firebaseapp.com",
            projectId: "propix-lk-web-portfolio",
            storageBucket: "propix-lk-web-portfolio.firebasestorage.app",
            messagingSenderId: "818456575110",
            appId: "1:818456575110:web:32cbbdcc2843229fbd2507",
            measurementId: "G-7WW2Z22897"
        };
        // -------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function initPortfolio() {
            const gallery = document.getElementById('gallery-container');
            const loading = document.getElementById('loading-indicator');
            const q = query(collection(db, "portfolio_items"), orderBy("createdAt", "desc"));
            
            onSnapshot(q, (snapshot) => {
                loading.style.display = 'none';
                if(snapshot.empty) {
                    loading.style.display = 'block';
                    loading.textContent = "No images uploaded yet.";
                    return;
                }
                const newItems = [];
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const item = document.createElement('div');
                    item.className = 'gallery-item group animate-fade-in';
                    item.setAttribute('data-category', data.category);
                    item.innerHTML = `
                        <img src="${data.imageUrl}" alt="${data.category}" loading="lazy">
                        <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    `;
                    newItems.push(item);
                });
                gallery.innerHTML = ''; 
                newItems.forEach(item => gallery.appendChild(item));
                attachHoverEffects();
                
                // Re-apply active filter logic
                const activeBtn = document.querySelector('.filter-btn.active');
                if(activeBtn && activeBtn.innerText.toLowerCase() !== 'all') {
                    const cat = activeBtn.innerText.toLowerCase() === 'social media' ? 'social' : activeBtn.innerText.toLowerCase();
                    window.filterGallery(cat, activeBtn);
                }

            }, (error) => {
                console.error("Error:", error);
                loading.textContent = "Failed to load. Check console.";
            });
        }

        initPortfolio();

        function attachHoverEffects() {
            const cursor = document.getElementById('customCursor');
            document.querySelectorAll('.gallery-item').forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
            });
        }
    </script>

    <script>
        lucide.createIcons();
        function toggleDarkMode() { document.documentElement.classList.toggle('dark'); }

        const cursor = document.getElementById('customCursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        window.filterGallery = function(category, btn) {
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const items = document.querySelectorAll('.gallery-item');
            items.forEach(item => {
                if (category === 'all' || item.getAttribute('data-category') === category) {
                    item.style.display = 'block';
                    item.classList.remove('hidden');
                } else {
                    item.style.display = 'none';
                    item.classList.add('hidden');
                }
            });
        }
        
        function request() {
            window.open(`https://wa.me/94768294496?text=Hi,%20I%20want%20to%20design..`, '_blank');
        }

        // Mobile Menu
        const mBtn = document.getElementById('mobile-menu-btn');
        const mMenu = document.getElementById('mobile-menu');
        if(mBtn && mMenu) {
            mBtn.addEventListener('click', () => mMenu.classList.toggle('hidden'));
            mMenu.querySelectorAll('a').forEach(l => l.addEventListener('click', () => mMenu.classList.add('hidden')));
        }
    </script>
</body>
</html>