<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Portfolio | Propix Lk</title>
    <meta name="description" content="Browse our creative portfolio including Social Media Posts, Logos, Banners, and more.">
    
    <link rel="manifest" href="/site.webmanifest">
    <link rel="shortcut icon" href="assets/img/Favicon/favicon.ico">
    <meta name="theme-color" content="#ffffff">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            100: '#03abec',
                            200: '#1590ef',
                            300: '#1c86f1',
                            400: '#2e69f4',
                            500: '#3d53f7',
                            600: '#424cf6',
                            900: '#1a237e', 
                        },
                        dark: {
                            bg: '#0b1121', 
                            card: '#1e293b',
                            text: '#f8fafc',
                            muted: '#cbd5e1'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Shared Styles */
        body { cursor: none; overflow-x: hidden; }
        @media (pointer: coarse) { body { cursor: auto; } .custom-cursor { display: none; } }

        /* Hide Scrollbar for Filter Section */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Security: Prevent Selection and Dragging */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
        }
        
        /* Prevent Right Click Context Menu specifically on protected items */
        .protected-img {
            pointer-events: none; /* Mouse clicks pass through to the container */
        }

        .custom-cursor {
            position: fixed; top: 0; left: 0; width: 20px; height: 20px;
            border: 2px solid #424cf6; border-radius: 50%; pointer-events: none;
            transform: translate(-50%, -50%); z-index: 9999;
            transition: transform 0.1s ease, width 0.2s, height 0.2s, background-color 0.2s;
            mix-blend-mode: difference;
        }
        .custom-cursor.hovered { width: 40px; height: 40px; background-color: rgba(66, 76, 246, 0.3); border-color: transparent; }

        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0, 0, 0, 0.05); }
        .dark .glass { background: rgba(11, 17, 33, 0.9); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }

        /* Snow Effect - Optimized */
        .snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; overflow: hidden; }
        .snowflake { position: absolute; background: white; border-radius: 50%; pointer-events: none; box-shadow: 0 0 5px rgba(255, 255, 255, 0.7); animation: snowfall linear infinite; }
        @keyframes snowfall {
            0% { transform: translateY(-100%) translateX(0); opacity: 0; }
            5% { opacity: 0.8; } 
            100% { transform: translateY(100vh) translateX(var(--wind-offset)); opacity: 0; } 
        }

        /* Filter Styles */
        .filter-btn { white-space: nowrap; } /* Prevents text wrapping inside buttons */
        .filter-btn.active { background-color: #424cf6; color: white; border-color: #424cf6; }
        
        /* Masonry & Layout Optimization */
        /* Forces images to fill columns without gaps */
        .masonry-item { 
            break-inside: avoid; 
            margin-bottom: 0; 
            display: block;
            width: 100%;
        }
        .masonry-item img {
            display: block; 
            width: 100%;
            height: auto;
        }

        /* Lightbox */
        #lightbox { transition: opacity 0.3s ease; }
        #lightbox.hidden { opacity: 0; pointer-events: none; }
        #lightbox:not(.hidden) { opacity: 1; pointer-events: auto; }
        
        /* Loading Skeleton */
        .image-placeholder { 
            position: absolute; inset: 0; z-index: 0;
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); 
            background-size: 200% 100%; animation: loading 1.5s infinite; 
        }
        .dark .image-placeholder { background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%); }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="antialiased relative bg-white text-gray-900 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300 min-h-screen flex flex-col" oncontextmenu="return false;">

    <div class="snow-container" id="snowContainer"></div>
    <div class="custom-cursor hidden md:block" id="customCursor"></div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center cursor-pointer hoverable" onclick="window.location.href='index.html'">
                    <img src="assets/img/Sitelogo.png" alt="Propix Logo" class="h-8 md:h-9 lg:h-10 w-auto object-contain block dark:hidden transition-all protected-img"> 
                    <img src="assets/img/Sitelogow.png" alt="Propix Logo" class="h-8 md:h-9 lg:h-10 w-auto object-contain hidden dark:block transition-all protected-img"> 
                </div>
                
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Home</a>
                    <a href="index.html#about" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">About</a>
                    <a href="portfolio.html" class="text-brand-600 dark:text-brand-400 font-bold transition hoverable">Work</a>
                    <a href="index.html#services" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Services</a>
                    <a href="index.html#contact" class="text-gray-700 dark:text-gray-200 hover:text-brand-600 dark:hover:text-brand-400 font-medium transition hoverable">Contact</a>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-brand-400 hoverable">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    <a href="https://wa.me/message/JGOBR5KKO5UAF1" class="px-6 py-2.5 bg-brand-600 text-white rounded-full font-medium hover:bg-brand-500 transition shadow-lg shadow-brand-500/30 hoverable">
                        Let's Talk
                    </a>
                </div>

                <div class="md:hidden flex items-center gap-2">
                     <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-brand-400">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    <button id="mobile-menu-btn" class="p-2 text-gray-700 dark:text-white hover:text-brand-600 focus:outline-none">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Updated z-index to 49 to stay above filter bar -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-dark-card absolute w-full border-b border-gray-100 dark:border-gray-700 shadow-xl z-49">
            <div class="px-4 pt-4 pb-8 space-y-3 flex flex-col items-center text-center">
                <a href="index.html" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">Home</a>
                <a href="portfolio.html" class="block w-full px-3 py-4 text-lg font-bold text-brand-600 dark:text-brand-400 bg-brand-50 dark:bg-brand-900/20 rounded-xl">Work</a>
                <a href="index.html#services" class="block w-full px-3 py-4 text-lg font-medium text-gray-700 dark:text-gray-200 hover:text-brand-600 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl">Services</a>
                <a href="index.html#contact" class="block w-full px-3 py-4 text-lg font-bold text-white bg-brand-600 rounded-xl shadow-lg shadow-brand-500/30">Contact Us</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="pt-32 pb-4 lg:pt-40 lg:pb-8 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto text-center relative overflow-hidden">
        <div class="relative z-10 animate-fade-in">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-display font-bold text-gray-900 dark:text-white mb-6 leading-tight">
                Our <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-600 via-brand-400 to-brand-100">Work</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600 dark:text-dark-muted">
                Explore our creative journey.
            </p>
        </div>
    </section>

    <!-- Filter Buttons (Updated z-index to 45 to be above gallery items but below nav) -->
    <section class="sticky top-[75px] md:top-20 z-45 bg-white/95 dark:bg-dark-bg/95 backdrop-blur-sm border-b border-gray-100 dark:border-gray-800 py-3 mb-0 shadow-sm transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Used overflow-x-auto and flex-nowrap for mobile horizontal scrolling -->
            <div class="flex flex-nowrap md:flex-wrap overflow-x-auto md:overflow-x-visible justify-start md:justify-center gap-2 pb-2 md:pb-0 no-scrollbar" id="filter-container">
                <button class="filter-btn active px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="all">All</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="social">Social Media</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="logo">Logo</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="tute">Tute-cover</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="cv">CV</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="banner">Banner</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="flyer">Flyer & Brochure</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="bookmark">Book-Mark</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="label">Label</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="card">Card</button>
                <button class="filter-btn px-5 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 text-sm font-semibold transition-all hover:border-brand-500 hover:text-brand-600 dark:hover:text-brand-400 flex-shrink-0 hoverable" data-filter="other">Other</button>
            </div>
        </div>
    </section>

    <!-- Gallery Grid -->
    <!-- Added min-h-[50vh] to prevent layout collapse when filtering -->
    <section class="flex-grow pb-20 pt-0 min-h-[50vh]">
        <!-- 
           Full Width Container for "No Space" effect 
           columns-1 (mobile) -> columns-2 (sm) -> columns-3 (md) -> columns-4 (lg)
           gap-0 ensures no space between columns
        -->
        <div class="w-full">
            <div id="gallery-grid" class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-0 space-y-0 w-full transition-opacity duration-300 opacity-100">
                <!-- Javascript will inject items here -->
            </div>
            
            <!-- Load More / Status -->
            <div class="mt-12 text-center" id="load-more-container">
                <button id="load-more-btn" onclick="loadMoreImages()" class="hidden items-center gap-2 px-8 py-3 bg-brand-600 text-white rounded-full font-bold hover:bg-brand-500 transition shadow-lg shadow-brand-600/30 hoverable mx-auto">
                    Load More Work
                </button>
                <p id="all-loaded-text" class="hidden text-gray-500 dark:text-gray-400 mt-4 italic">You've reached the end of the list!</p>
            </div>

            <div class="mt-16 text-center px-4">
                 <p class="text-gray-500 dark:text-gray-400 mb-6">Want to see something specific?</p>
                <a href="index.html#contact" class="inline-flex items-center gap-2 px-8 py-3 border-2 border-brand-600 text-brand-600 dark:text-brand-400 rounded-full font-bold hover:bg-brand-600 hover:text-white transition hoverable">
                    Request Custom Design
                </a>
            </div>
        </div>
    </section>

    <!-- Lightbox -->
    <div id="lightbox" class="fixed inset-0 z-[1000] bg-black/95 hidden flex items-center justify-center p-4">
        <button class="absolute top-6 right-6 text-white hover:text-brand-400 transition hoverable z-[1002]" onclick="closeLightbox()">
            <i data-lucide="x" class="w-10 h-10"></i>
        </button>
        <div class="relative w-full max-w-5xl max-h-[90vh] flex flex-col items-center z-[1001]" oncontextmenu="return false;">
            <!-- Overlay to prevent drag/save on lightbox image -->
            <div class="absolute inset-0 z-50"></div>
            <img id="lightbox-img" src="" class="max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl no-select" draggable="false">
            <div class="mt-4 text-center z-50 pointer-events-none">
                <h3 id="lightbox-title" class="text-white text-xl font-bold drop-shadow-md"></h3>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="relative bg-gray-900 dark:bg-black text-white pt-20 pb-10 overflow-hidden border-t border-gray-800">
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
            <div class="absolute -top-24 -right-24 w-96 h-96 bg-brand-600/10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 bg-brand-400/10 rounded-full blur-3xl"></div>
        </div>
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                <div class="space-y-6">
                    <a href="index.html" class="inline-block hoverable">
                        <img src="assets/img/Sitelogow.png" alt="Propix Lk" class="h-9 w-auto">
                    </a>
                    <p class="text-gray-400 text-sm leading-relaxed max-w-xs">Smart Design. Sharp Pixels.</p>
                </div>
                <div>
                    <h3 class="text-lg font-display font-bold mb-6 text-white">Quick Links</h3>
                    <ul class="space-y-4">
                        <li><a href="index.html" class="text-gray-400 hover:text-brand-400 transition-colors hoverable">Home</a></li>
                        <li><a href="portfolio.html" class="text-brand-400 font-bold transition-colors hoverable">Work</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-display font-bold mb-6 text-white">Contact</h3>
                    <div class="space-y-4">
                        <a href="mailto:propixlk@gmail.com" class="block text-gray-400 hover:text-white transition-colors">propixlk@gmail.com</a>
                        <a href="https://wa.me/message/JGOBR5KKO5UAF1" class="block text-gray-400 hover:text-white transition-colors">WhatsApp Us</a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-sm text-gray-500">&copy; 2024 - 2026 <span class="text-brand-400 font-bold">Propix LK</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        lucide.createIcons();

        // --- 1. DATA CONFIGURATION (ADD YOUR 500 IMAGES HERE) ---
        // New Categories Added: 'flyer', 'bookmark', 'label', 'card'
        const portfolioData = [
            // Social Media Examples
            { src: "assets/img/portfolio/1.webp", category: "social", title: "Product Campaign" },
            { src: "assets/img/portfolio/7.jpg", category: "social", title: "Instagram Post" }, 
            
            // Logo Examples
            { src: "assets/img/portfolio/2.webp", category: "logo", title: "Modern Minimalist" },
            { src: "assets/img/portfolio/8.webp", category: "logo", title: "Brand Identity" },

            // Banner Examples
            { src: "assets/img/portfolio/4.webp", category: "banner", title: "Web Banner Ads" },
            { src: "assets/img/portfolio/9.webp", category: "banner", title: "Large Format Print" },
            
            // Tute/Education Examples
            { src: "assets/img/portfolio/5.webp", category: "tute", title: "Education Cover" },
            { src: "assets/img/portfolio/10.webp", category: "tute", title: "Physics Cover" },
            
            // CV Examples
            { src: "assets/img/portfolio/3.webp", category: "cv", title: "Professional Resume" },
            
            // --- NEW CATEGORIES ---
            
            // Flyer & Brochure (Use 'flyer' as category)
            { src: "assets/img/portfolio/flyer1.webp", category: "flyer", title: "Corporate Brochure" },
            { src: "assets/img/portfolio/flyer2.jpg", category: "flyer", title: "Event Flyer" },
            
            // Book-Mark (Use 'bookmark' as category)
            { src: "assets/img/portfolio/bm1.webp", category: "bookmark", title: "Custom Bookmark" },
            
            // Label (Use 'label' as category)
            { src: "assets/img/portfolio/label1.webp", category: "label", title: "Product Bottle Label" },
            { src: "assets/img/portfolio/label2.jpg", category: "label", title: "Packaging Sticker" },
            
            // Card (Use 'card' as category)
            { src: "assets/img/portfolio/card1.webp", category: "card", title: "Business Card Front" },
            { src: "assets/img/portfolio/card2.webp", category: "card", title: "Business Card Back" },
            
            // Other
            { src: "assets/img/portfolio/6.webp", category: "other", title: "Miscellaneous Design" },
        ];

        // --- 2. LOGIC FOR RENDERING & LOADING ---
        let currentFilter = 'all';
        let itemsToShow = 12; // Initial items to show
        let itemsIncrement = 12; // How many to add when clicking "Load More"
        let renderedCount = 0;
        let filteredData = [];

        const galleryGrid = document.getElementById('gallery-grid');
        const loadMoreBtn = document.getElementById('load-more-btn');
        const allLoadedText = document.getElementById('all-loaded-text');
        
        // Initialize
        function initGallery() {
            applyFilter('all');
            setupFilterButtons();
        }

        function setupFilterButtons() {
            const btns = document.querySelectorAll('.filter-btn');
            btns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default button behavior
                    
                    // Visual update
                    btns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Center the clicked button in scroll view (Mobile)
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });

                    // Logic update
                    const category = btn.getAttribute('data-filter');
                    
                    // Smooth transition
                    galleryGrid.style.opacity = '0';
                    setTimeout(() => {
                        applyFilter(category);
                        galleryGrid.style.opacity = '1';
                    }, 200);
                });
            });
        }

        function applyFilter(category) {
            currentFilter = category;
            
            // 1. Filter the data source
            if (category === 'all') {
                filteredData = portfolioData;
            } else {
                filteredData = portfolioData.filter(item => item.category === category);
            }

            // 2. Reset display counts
            renderedCount = 0;
            galleryGrid.innerHTML = ''; // Clear grid
            
            // 3. Render first batch
            loadMoreImages();
        }

        function loadMoreImages() {
            const total = filteredData.length;
            const nextBatchSize = renderedCount + itemsIncrement;
            const limit = Math.min(total, nextBatchSize);

            // Generate HTML for the next batch
            for (let i = renderedCount; i < limit; i++) {
                const item = filteredData[i];
                const html = createGalleryItem(item);
                galleryGrid.insertAdjacentHTML('beforeend', html);
            }

            renderedCount = limit;

            // Handle "Load More" button visibility
            if (renderedCount >= total) {
                loadMoreBtn.classList.add('hidden');
                loadMoreBtn.classList.remove('flex');
                if(total > 0) allLoadedText.classList.remove('hidden');
            } else {
                loadMoreBtn.classList.remove('hidden');
                loadMoreBtn.classList.add('flex');
                allLoadedText.classList.add('hidden');
            }
        }

        function createGalleryItem(item) {
            // Note: mb-0 and block w-full are crucial for the "no space" layout
            return `
            <div class="masonry-item group relative cursor-pointer hoverable overflow-hidden w-full" onclick="openLightbox('${item.src}', '${item.title}')">
                <div class="image-placeholder absolute inset-0 z-0"></div>
                
                <img src="${item.src}" 
                     loading="lazy" 
                     alt="${item.title}" 
                     draggable="false"
                     oncontextmenu="return false;"
                     class="w-full h-auto block relative z-10 transition duration-500 group-hover:scale-105 no-select protected-img"
                     onload="this.previousElementSibling.style.display='none'"
                     onerror="this.src='https://placehold.co/600x400?text=Image+Not+Found'">
                
                <!-- Transparent Overlay to prevent Right Click/Save As but allow clicks -->
                <div class="absolute inset-0 z-30" oncontextmenu="return false;"></div>

                <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-40 flex flex-col justify-end p-6 pointer-events-none">
                    <span class="text-brand-400 text-xs font-bold uppercase tracking-wider mb-1">${item.category}</span>
                    <h3 class="text-white font-bold text-lg">${item.title}</h3>
                </div>
            </div>
            `;
        }

        // --- 3. UTILITIES & UI ---
        
        // Disable Right Click Globally for added protection
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Dark Mode
        function toggleDarkMode() { 
            document.documentElement.classList.toggle('dark'); 
        }

        // Mobile Menu
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        btn.addEventListener('click', () => { menu.classList.toggle('hidden'); });

        // Custom Cursor
        const cursor = document.getElementById('customCursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });
        document.querySelectorAll('a, button, .hoverable').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // Lightbox
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxTitle = document.getElementById('lightbox-title');

        window.openLightbox = function(src, title) {
            lightboxImg.src = src;
            lightboxTitle.innerText = title;
            lightbox.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        window.closeLightbox = function() {
            lightbox.classList.add('hidden');
            document.body.style.overflow = 'auto';
            setTimeout(() => { lightboxImg.src = ''; }, 300); 
        }

        lightbox.addEventListener('click', (e) => {
            if(e.target === lightbox || e.target.closest('button')) closeLightbox();
        });
        document.addEventListener('keydown', (e) => {
            if(e.key === "Escape") closeLightbox();
        });

        // Optimized Snow
        const snowContainer = document.getElementById('snowContainer');
        let snowCount = 0;
        function createSnowflake() {
            if(snowCount > 30) return; 
            
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            const size = Math.random() * 3 + 1; 
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.left = `${Math.random() * 100}vw`;
            
            const duration = Math.random() * 5 + 5; 
            snowflake.style.animationDuration = `${duration}s`;
            
            snowContainer.appendChild(snowflake);
            snowCount++;
            
            setTimeout(() => { 
                snowflake.remove(); 
                snowCount--;
            }, duration * 1000);
        }
        setInterval(createSnowflake, 300);

        document.addEventListener('DOMContentLoaded', initGallery);

    </script>
</body>
</html>